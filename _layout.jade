doctype 5
html(lang="en")
  head
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0, maximum-scale=1.0')
    title= locals.title ? title + " | " + site_title : site_title
    if current.path[0] === "index"
      meta(name='description', content=description)
    else
      if current.path[0] === "blog"
        meta(name='description', content=description)
    meta(property='og:title', content=locals.title ? title + " | " + site_title : site_title)
    if current.path[0] === "index"
      meta(property='og:description', content=description)
      meta(property='og:url', content=site_url)
      meta(property='og:type', content='website')
    else
      if current.path[0] === "blog"
        meta(property='og:description', content=description)
        meta(property='og:url', content=site_url + "/" + current.path[1])
        meta(property='og:type', content='article')
    meta(property='og:image', content=site_url + logo)
    if current.path[0] === "blog"
      if public.authors.data[author].google_plus
        link(rel='author', href='#{ public.authors.data[author].google_plus }')
    link(rel='shortcut icon', href='/favicon.ico')
    link(rel='alternate', type='application/rss+xml', title=site_title + "RSS Feed", href='/blog/rss.xml')
    link(rel='stylesheet', href='http://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic')
    link(rel='stylesheet', href='http://fonts.googleapis.com/css?family=Lekton')
    link(rel="stylesheet", href='/css/main.css')
    //if lt IE 9
      <script src="/js/html5shiv.js"></script>
  body(class="page-#{ current.path[0] } #{ current.path.join('-') }")
    header.masthead
      .container
        h1
          a(href='/')= site_title
      .img
    .content
      .container
        if current.path[0] === "index"
          .articles
            for post, slug in public.blog.data
              article
                a(href="/blog/#{ slug }")
                  h1= post.title
                  h2.xs.date= post.date
                  p= post.description
        else
          if current.path[0] === "blog"
            != partial("/blog/_blog")
          else if current.path[0] === "authors"
            != partial("/authors/_author")
          else if ["404", "about"].indexOf(current.path[0]) !== -1
            section.page
              != yield